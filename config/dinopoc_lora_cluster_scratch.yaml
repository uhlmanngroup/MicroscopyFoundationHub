# Environment: cluster (legacy scratch staging) â€” composed DINO-POC dataset

# Composed dataset
train_img_dir: "/home/cfuste/scratch/datasets/DINO-POC/train/images"
train_mask_dir: "/home/cfuste/scratch/datasets/DINO-POC/train/masks"
val_img_dir:   "/home/cfuste/scratch/datasets/DINO-POC/test/images"
val_mask_dir:  "/home/cfuste/scratch/datasets/DINO-POC/test/masks"

num_classes: 2
binarize: true
binarize_threshold: 128

# results + experiment naming
experiment_id: "2025-01-01_A1_composed_dinov2-base_lora-r8_seg"
results_root: "/Users/cfuste/Documents/Results/DINO-LoRA"
task_type: "seg"

# larger / faster on GPUs
img_size:
  mode: longest_edge
  target: 1022
  patch_multiple: 14
  rounding: floor
dataset:
  type: paired
  params:
    pair_mode: "stem"
    recursive: false
batch_size: 8
num_workers: 8

# model & LoRA
dino_size: "base"        # choose one: small, base, large, giant
use_lora: true
lora_rank: 8          # 4, 8, 16
lora_alpha: 16
lora_targets: ["attn.qkv","attn.proj"]

# device
device: "auto"           # will pick "cuda" on the cluster
amp: true                # mixed precision on CUDA

# training
epochs: 40
patience: 20
lr: 1.0e-4
weight_decay: 1.0e-4
save_every: 5

# outputs handled via results_root/experiment_id
